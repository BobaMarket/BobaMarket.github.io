(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[5],{G13b:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return J})),r.d(t,"b",(function(){return Bt})),r.d(t,"c",(function(){return D})),r.d(t,"d",(function(){return Rt})),r.d(t,"e",(function(){return se})),r.d(t,"f",(function(){return ae})),r.d(t,"g",(function(){return qt}));var n=r("lwsE"),a=r.n(n),s=r("W8MJ"),i=r.n(s),o=r("lSNA"),u=r.n(o),c=r("WKRr"),l=r.n(c),p=r("o0o1"),f=r.n(p),h=r("yXPU"),b=r.n(h),d=r("UxlT"),g=r.n(d),m=r("B3Rj"),y=r.n(m),v=r("9NtJ"),k=r("kB7U"),w=r("RIqP"),x=r.n(w),S=r("J4zp"),_=r.n(S),O=r("9lTW"),j=r.n(O),A=r("QmWs"),I=r("oY9k"),E=r.n(I),B=r("UCp1"),C=r.n(B),P=r("2SAM"),R=r("PxAc"),W=r("lJCZ"),q=r.n(W),T=r("JPgR"),N=r.n(T),z=r("IzB8"),K=r.n(z),U=(r("aYMp"),function(t){return t instanceof e?t:t instanceof Uint8Array?e.from(t.buffer,t.byteOffset,t.byteLength):e.from(t)}),M=l.a.lowlevel,D=function(){function t(e){if(a()(this,t),u()(this,"_bn",void 0),"string"===typeof e){var r=y.a.decode(e);if(32!=r.length)throw new Error("Invalid public key input");this._bn=new g.a(r)}else this._bn=new g.a(e);if(this._bn.byteLength()>32)throw new Error("Invalid public key input")}return i()(t,[{key:"equals",value:function(e){return this._bn.eq(e._bn)}},{key:"toBase58",value:function(){return y.a.encode(this.toBuffer())}},{key:"toBuffer",value:function(){var t=this._bn.toArrayLike(e);if(32===t.length)return t;var r=e.alloc(32);return t.copy(r,32-t.length),r}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"createWithSeed",value:function(){var r=b()(f.a.mark((function r(n,a,s){var i,o;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.concat([n.toBuffer(),e.from(a),s.toBuffer()]),r.next=3,Object(v.sha256)(new Uint8Array(i));case 3:return o=r.sent,r.abrupt("return",new t(e.from(o,"hex")));case 5:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}()},{key:"createProgramAddress",value:function(){var r=b()(f.a.mark((function r(n,a){var s,i,o;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e.alloc(0),n.forEach((function(t){if(t.length>32)throw new Error("Max seed length exceeded");s=e.concat([s,e.from(t)])})),s=e.concat([s,a.toBuffer(),e.from("ProgramDerivedAddress")]),r.next=5,Object(v.sha256)(new Uint8Array(s));case 5:if(i=r.sent,!L(o=new g.a(i,16).toArray(null,32))){r.next=9;break}throw new Error("Invalid seeds, address must fall off the curve");case 9:return r.abrupt("return",new t(o));case 10:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},{key:"findProgramAddress",value:function(){var t=b()(f.a.mark((function t(r,n){var a,s,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=255;case 1:if(0==a){t.next=16;break}return t.prev=2,i=r.concat(e.from([a])),t.next=6,this.createProgramAddress(i,n);case 6:s=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(2),a--,t.abrupt("continue",1);case 13:return t.abrupt("return",[s,a]);case 16:throw new Error("Unable to find a viable program address nonce");case 17:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(e,r){return t.apply(this,arguments)}}()}]),t}();function L(e){var t=[M.gf(),M.gf(),M.gf(),M.gf()],r=M.gf(),n=M.gf(),a=M.gf(),s=M.gf(),i=M.gf(),o=M.gf(),u=M.gf();return M.set25519(t[2],F),M.unpack25519(t[1],e),M.S(a,t[1]),M.M(s,a,M.D),M.Z(a,a,t[2]),M.A(s,t[2],s),M.S(i,s),M.S(o,i),M.M(u,o,i),M.M(r,u,a),M.M(r,r,s),M.pow2523(r,r),M.M(r,r,a),M.M(r,r,s),M.M(r,r,s),M.M(t[0],r,s),M.S(n,t[0]),M.M(n,n,s),H(n,a)&&M.M(t[0],t[0],V),M.S(n,t[0]),M.M(n,n,s),H(n,a)?0:1}var F=M.gf([1]),V=M.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function H(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return M.pack25519(r,e),M.pack25519(n,t),M.crypto_verify_32(r,0,n,0)}var J=function(){function e(t){a()(this,e),u()(this,"_keypair",void 0),this._keypair=t?l.a.sign.keyPair.fromSecretKey(U(t)):l.a.sign.keyPair()}return i()(e,[{key:"publicKey",get:function(){return new D(this._keypair.publicKey)}},{key:"secretKey",get:function(){return this._keypair.secretKey}}]),e}(),G=(new D("BPFLoader1111111111111111111111111111111111"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return Object(k.blob)(32,e)}),X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",r=Object(k.struct)([Object(k.u32)("length"),Object(k.u32)("lengthPadding"),Object(k.blob)(Object(k.offset)(Object(k.u32)(),-8),"chars")],t),n=r.decode.bind(r),a=r.encode.bind(r);return r.decode=function(e,t){return n(e,t).chars.toString("utf8")},r.encode=function(t,r,n){var s={chars:e.from(t,"utf8")};return a(s,r,n)},r.alloc=function(t){return Object(k.u32)().span+Object(k.u32)().span+e.from(t,"utf8").length},r};function Y(e){for(var t=0,r=0;;){var n=e.shift();if(t|=(127&n)<<7*r,r+=1,0===(128&n))break}return t}function Z(e,t){for(var r=t;;){var n=127&r;if(0==(r>>=7)){e.push(n);break}n|=128,e.push(n)}}var $=function(){function t(e){a()(this,t),u()(this,"header",void 0),u()(this,"accountKeys",void 0),u()(this,"recentBlockhash",void 0),u()(this,"instructions",void 0),this.header=e.header,this.accountKeys=e.accountKeys.map((function(e){return new D(e)})),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions}return i()(t,[{key:"isAccountWritable",value:function(e){return e<this.header.numRequiredSignatures-this.header.numReadonlySignedAccounts||e>=this.header.numRequiredSignatures&&e<this.accountKeys.length-this.header.numReadonlyUnsignedAccounts}},{key:"serialize",value:function(){var t=this.accountKeys.length,r=[];Z(r,t);var n=this.instructions.map((function(t){var r=t.accounts,n=t.programIdIndex,a=y.a.decode(t.data),s=[];Z(s,r.length);var i=[];return Z(i,a.length),{programIdIndex:n,keyIndicesCount:e.from(s),keyIndices:e.from(r),dataLength:e.from(i),data:a}})),a=[];Z(a,n.length);var s=e.alloc(ne);e.from(a).copy(s);var i=a.length;n.forEach((function(e){var t=Object(k.struct)([Object(k.u8)("programIdIndex"),Object(k.blob)(e.keyIndicesCount.length,"keyIndicesCount"),Object(k.seq)(Object(k.u8)("keyIndex"),e.keyIndices.length,"keyIndices"),Object(k.blob)(e.dataLength.length,"dataLength"),Object(k.seq)(Object(k.u8)("userdatum"),e.data.length,"data")]).encode(e,s,i);i+=t})),s=s.slice(0,i);var o=Object(k.struct)([Object(k.blob)(1,"numRequiredSignatures"),Object(k.blob)(1,"numReadonlySignedAccounts"),Object(k.blob)(1,"numReadonlyUnsignedAccounts"),Object(k.blob)(r.length,"keyCount"),Object(k.seq)(G("key"),t,"keys"),G("recentBlockhash")]),u={numRequiredSignatures:e.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:e.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:e.from([this.header.numReadonlyUnsignedAccounts]),keyCount:e.from(r),keys:this.accountKeys.map((function(e){return e.toBuffer()})),recentBlockhash:y.a.decode(this.recentBlockhash)},c=e.alloc(2048),l=o.encode(u,c);return s.copy(c,l),c.slice(0,l+s.length)}}],[{key:"from",value:function(r){for(var n=x()(r),a=n.shift(),s=n.shift(),i=n.shift(),o=Y(n),u=[],c=0;c<o;c++){var l=n.slice(0,32);n=n.slice(32),u.push(y.a.encode(e.from(l)))}for(var p=n.slice(0,32),f=Y(n=n.slice(32)),h=[],b=0;b<f;b++){var d={};d.programIdIndex=n.shift();var g=Y(n);d.accounts=n.slice(0,g);var m=Y(n=n.slice(g)),v=n.slice(0,m);d.data=y.a.encode(e.from(v)),n=n.slice(m),h.push(d)}return new t({header:{numRequiredSignatures:a,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:y.a.encode(e.from(p)),accountKeys:u,instructions:h})}}]),t}();function Q(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var re=e.alloc(64).fill(0),ne=1232,ae=function t(r){a()(this,t),u()(this,"keys",[]),u()(this,"programId",void 0),u()(this,"data",e.alloc(0)),r&&Object.assign(this,r)},se=function(){function t(e){a()(this,t),u()(this,"signatures",[]),u()(this,"feePayer",void 0),u()(this,"instructions",[]),u()(this,"recentBlockhash",void 0),u()(this,"nonceInfo",void 0),e&&Object.assign(this,e)}return i()(t,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}}]),i()(t,[{key:"add",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(0===r.length)throw new Error("No instructions");return r.forEach((function(t){"instructions"in t?e.instructions=e.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?e.instructions.push(t):e.instructions.push(new ae(t))})),this}},{key:"compileMessage",value:function(){var e=this.nonceInfo;e&&this.instructions[0]!=e.nonceInstruction&&(this.recentBlockhash=e.nonce,this.instructions.unshift(e.nonceInstruction));var t,r=this.recentBlockhash;if(!r)throw new Error("Transaction recentBlockhash required");if(this.instructions.length<1)throw new Error("No instructions provided");if(this.feePayer)t=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");t=this.signatures[0].publicKey}var n=[],a=[];this.instructions.forEach((function(e){e.keys.forEach((function(e){a.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}));var t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((function(e){a.push({pubkey:new D(e),isSigner:!1,isWritable:!1})})),a.sort((function(e,t){var r=e.isSigner===t.isSigner?0:e.isSigner?-1:1,n=e.isWritable===t.isWritable?0:e.isWritable?-1:1;return r||n}));var s=[];a.forEach((function(e){var t=e.pubkey.toString(),r=s.findIndex((function(e){return e.pubkey.toString()===t}));r>-1?s[r].isWritable=s[r].isWritable||e.isWritable:s.push(e)}));var i=s.findIndex((function(e){return e.pubkey.equals(t)}));if(i>-1){var o=s.splice(i,1),c=_()(o,1)[0];c.isSigner=!0,c.isWritable=!0,s.unshift(c)}else s.unshift({pubkey:t,isSigner:!0,isWritable:!0});var l,p=Q(this.signatures);try{var f=function(){var e=l.value,t=s.findIndex((function(t){return t.pubkey.equals(e.publicKey)}));if(!(t>-1))throw new Error("unknown signer: ".concat(e.publicKey.toString()));s[t].isSigner||(s[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))};for(p.s();!(l=p.n()).done;)f()}catch(w){p.e(w)}finally{p.f()}var h=0,b=0,d=0,g=[],m=[];s.forEach((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;r?(g.push(t.toString()),h+=1,n||(b+=1)):(m.push(t.toString()),n||(d+=1))}));var v=g.concat(m),k=this.instructions.map((function(e){var t=e.data,r=e.programId;return{programIdIndex:v.indexOf(r.toString()),accounts:e.keys.map((function(e){return v.indexOf(e.pubkey.toString())})),data:y.a.encode(t)}}));return k.forEach((function(e){j()(e.programIdIndex>=0),e.accounts.forEach((function(e){return j()(e>=0)}))})),new $({header:{numRequiredSignatures:h,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:d},accountKeys:v,recentBlockhash:r,instructions:k})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length&&this.signatures.every((function(e,r){return t[r].equals(e.publicKey)})))return e;return this.signatures=t.map((function(e){return{signature:null,publicKey:e}})),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"setSigners",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");var n=new Set;this.signatures=t.filter((function(e){var t=e.toString();return!n.has(t)&&(n.add(t),!0)})).map((function(e){return{signature:null,publicKey:e}}))}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,a=[],s=0,i=t;s<i.length;s++){var o=i[s],u=o.publicKey.toString();n.has(u)||(n.add(u),a.push(o))}this.signatures=a.map((function(e){return{signature:null,publicKey:e.publicKey}}));var c=this._compile();this._partialSign.apply(this,[c].concat(a)),this._verifySignatures(c.serialize(),!0)}},{key:"partialSign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,a=[],s=0,i=t;s<i.length;s++){var o=i[s],u=o.publicKey.toString();n.has(u)||(n.add(u),a.push(o))}var c=this._compile();this._partialSign.apply(this,[c].concat(a))}},{key:"_partialSign",value:function(e){for(var t=this,r=e.serialize(),n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];a.forEach((function(e){var n=l.a.sign.detached(r,e.secretKey);t._addSignature(e.publicKey,n)}))}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(t,r){j()(64===r.length);var n=this.signatures.findIndex((function(e){return t.equals(e.publicKey)}));if(n<0)throw new Error("unknown signer: ".concat(t.toString()));this.signatures[n].signature=e.from(r)}},{key:"verifySignatures",value:function(){return this._verifySignatures(this.serializeMessage(),!0)}},{key:"_verifySignatures",value:function(e,t){var r,n=Q(this.signatures);try{for(n.s();!(r=n.n()).done;){var a=r.value,s=a.signature,i=a.publicKey;if(null===s){if(t)return!1}else if(!l.a.sign.detached.verify(e,s,i.toBuffer()))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=t.requireAllSignatures,n=t.verifySignatures,a=this.serializeMessage();if(n&&!this._verifySignatures(a,r))throw new Error("Signature verification failed");return this._serialize(a)}},{key:"_serialize",value:function(t){var r=this.signatures,n=[];Z(n,r.length);var a=n.length+64*r.length+t.length,s=e.alloc(a);return j()(r.length<256),e.from(n).copy(s,0),r.forEach((function(t,r){var a=t.signature;null!==a&&(j()(64===a.length,"signature has invalid length"),e.from(a).copy(s,n.length+64*r))})),t.copy(s,n.length+64*r.length),j()(s.length<=ne,"Transaction too large: ".concat(s.length," > ").concat(ne)),s}},{key:"keys",get:function(){return j()(1===this.instructions.length),this.instructions[0].keys.map((function(e){return e.pubkey}))}},{key:"programId",get:function(){return j()(1===this.instructions.length),this.instructions[0].programId}},{key:"data",get:function(){return j()(1===this.instructions.length),this.instructions[0].data}}],[{key:"from",value:function(r){for(var n=x()(r),a=Y(n),s=[],i=0;i<a;i++){var o=n.slice(0,64);n=n.slice(64),s.push(y.a.encode(e.from(o)))}return t.populate($.from(n),s)}},{key:"populate",value:function(e,r){var n=new t;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((function(t,r){var a={signature:t==y.a.encode(re)?null:y.a.decode(t),publicKey:e.accountKeys[r]};n.signatures.push(a)})),e.instructions.forEach((function(t){var r=t.accounts.map((function(t){var r=e.accountKeys[t];return{pubkey:r,isSigner:n.signatures.some((function(e){return e.publicKey.toString()===r.toString()})),isWritable:e.isAccountWritable(t)}}));n.instructions.push(new ae({keys:r,programId:e.accountKeys[t.programIdIndex],data:y.a.decode(t.data)}))})),n}}]),t}(),ie=(new D("SysvarC1ock11111111111111111111111111111111"),new D("SysvarRecentB1ockHashes11111111111111111111")),oe=new D("SysvarRent111111111111111111111111111111111"),ue=(new D("SysvarRewards111111111111111111111111111111"),new D("SysvarStakeHistory1111111111111111111111111"),new D("Sysvar1nstructions1111111111111111111111111"),Object(k.nu64)("lamportsPerSignature")),ce=Object(k.struct)([Object(k.u32)("version"),Object(k.u32)("state"),G("authorizedPubkey"),G("nonce"),Object(k.struct)([ue],"feeCalculator")]),le=ce.span,pe=function(){function e(){a()(this,e),u()(this,"authorizedPubkey",void 0),u()(this,"nonce",void 0),u()(this,"feeCalculator",void 0)}return i()(e,null,[{key:"fromAccountData",value:function(e){var t=ce.decode(U(e),0);return t.authorizedPubkey=new D(t.authorizedPubkey),t.nonce=new D(t.nonce).toString(),t}}]),e}();function fe(e){return new Promise((function(t){return setTimeout(t,e)}))}function he(e,t){var r,n=new Promise((function(e){r=setTimeout((function(){return e(null)}),t)}));return Promise.race([e,n]).then((function(e){return clearTimeout(r),e}))}var be=function(){function e(t){a()(this,e),u()(this,"_agent",void 0),u()(this,"_activeRequests",0),u()(this,"_destroyTimeout",null),u()(this,"_useHttps",void 0),this._useHttps=!0===t,this._agent=e._newAgent(this._useHttps)}return i()(e,null,[{key:"_newAgent",value:function(e){var t={keepAlive:!0,maxSockets:25};return e?new N.a.Agent(t):new q.a.Agent(t)}}]),i()(e,[{key:"requestStart",value:function(){}},{key:"requestEnd",value:function(){}}]),e}();function de(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ge(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ve(e){return ke({context:Object(P.a)({slot:"number"}),value:e})}function ke(e){var t=P.a.literal("2.0");return P.a.union([Object(P.a)({jsonrpc:t,id:"string",error:"any"}),Object(P.a)({jsonrpc:t,id:"string",error:"null?",result:e})])}function we(e){return Object(P.a)({context:Object(P.a)({slot:"number"}),value:e})}var xe=Object(P.a)({foundation:"number",foundationTerm:"number",initial:"number",taper:"number",terminal:"number"}),Se=Object(P.a)({epoch:"number",slotIndex:"number",slotsInEpoch:"number",absoluteSlot:"number",blockHeight:"number?"}),_e=Object(P.a)({slotsPerEpoch:"number",leaderScheduleSlotOffset:"number",warmup:"boolean",firstNormalEpoch:"number",firstNormalSlot:"number"}),Oe=P.a.record(["string","any"]),je=P.a.union(["null","object"]),Ae=Object(P.a)({err:je}),Ie=P.a.pick({"solana-core":"string","feature-set":"number?"}),Ee=ve(P.a.pick({err:P.a.union(["null","object","string"]),logs:P.a.union(["null",P.a.array(["string"])])}));var Be=Object(P.a)({jsonrpc:P.a.literal("2.0"),id:"string",error:"any?",result:xe}),Ce=Object(P.a)({jsonrpc:P.a.literal("2.0"),id:"string",error:"any?",result:Se}),Pe=Object(P.a)({jsonrpc:P.a.literal("2.0"),id:"string",error:"any?",result:_e}),Re=ke(Oe),We=ve("number?"),qe=Object(P.a)({jsonrpc:P.a.literal("2.0"),id:"string",error:"any?",result:P.a.union(["null","number","undefined"])}),Te=Object(P.a)({jsonrpc:P.a.literal("2.0"),id:"string",error:"any?",result:"number"}),Ne=ve(Object(P.a)({total:"number",circulating:"number",nonCirculating:"number",nonCirculatingAccounts:P.a.array(["string"])})),ze=P.a.object({amount:"string",uiAmount:"number",decimals:"number"}),Ke=ve(P.a.array([P.a.pick({address:"string",amount:"string",uiAmount:"number",decimals:"number"})])),Ue=ve(ze),Me=ve(ze),De=ve(P.a.array([P.a.object({pubkey:"string",account:P.a.object({executable:"boolean",owner:"string",lamports:"number",data:["string",P.a.literal("base64")],rentEpoch:"number?"})})])),Le=ve(P.a.array([P.a.object({pubkey:"string",account:P.a.object({executable:"boolean",owner:"string",lamports:"number",data:P.a.pick({program:"string",parsed:"any",space:"number"}),rentEpoch:"number?"})})])),Fe=ve(P.a.array([Object(P.a)({lamports:"number",address:"string"})])),Ve=Object(P.a)({jsonrpc:P.a.literal("2.0"),id:"string",error:"any?",result:Ie}),He=Object(P.a)({executable:"boolean",owner:"string",lamports:"number",data:"any",rentEpoch:"number?"}),Je=P.a.object({executable:"boolean",owner:"string",lamports:"number",data:P.a.union([["string",P.a.literal("base64")],P.a.pick({program:"string",parsed:"any",space:"number"})]),rentEpoch:"number?"}),Ge=P.a.object({state:P.a.union([P.a.literal("active"),P.a.literal("inactive"),P.a.literal("activating"),P.a.literal("deactivating")]),active:"number",inactive:"number"}),Xe=ve(P.a.union(["null",He])),Ye=ve(P.a.union(["null",Je])),Ze=ke(Ge),$e=ke(P.a.array(["string"])),Qe=ke(P.a.array([Object(P.a)({signature:"string",slot:"number",err:je,memo:P.a.union(["null","string"])})])),et=Object(P.a)({subscription:"number",result:we(He)}),tt=Object(P.a)({pubkey:"string",account:He}),rt=Object(P.a)({pubkey:"string",account:Je}),nt=Object(P.a)({subscription:"number",result:we(tt)}),at=Object(P.a)({parent:"number",slot:"number",root:"number"}),st=Object(P.a)({subscription:"number",result:at}),it=Object(P.a)({subscription:"number",result:we(Ae)}),ot=Object(P.a)({subscription:"number",result:"number"}),ut=ke(P.a.array([tt])),ct=ke(P.a.array([rt])),lt=ke("number"),pt=ke("string"),ft=ke(P.a.array([P.a.pick({pubkey:"string",gossip:P.a.union(["null","string"]),tpu:P.a.union(["null","string"]),rpc:P.a.union(["null","string"]),version:P.a.union(["null","string"])})])),ht=ke(Object(P.a)({current:P.a.array([P.a.pick({votePubkey:"string",nodePubkey:"string",activatedStake:"number",epochVoteAccount:"boolean",epochCredits:P.a.array([P.a.tuple(["number","number","number"])]),commission:"number",lastVote:"number",rootSlot:"number?"})]),delinquent:P.a.array([P.a.pick({votePubkey:"string",nodePubkey:"string",activatedStake:"number",epochVoteAccount:"boolean",epochCredits:P.a.array([P.a.tuple(["number","number","number"])]),commission:"number",lastVote:"number",rootSlot:"number?"})])})),bt=ve(P.a.array([P.a.union(["null",P.a.pick({slot:"number",confirmations:P.a.union(["number","null"]),err:je})])])),dt=ke("number"),gt=ke("number"),mt=ke("number"),yt=Object(P.a)({signatures:P.a.array(["string"]),message:Object(P.a)({accountKeys:P.a.array(["string"]),header:Object(P.a)({numRequiredSignatures:"number",numReadonlySignedAccounts:"number",numReadonlyUnsignedAccounts:"number"}),instructions:P.a.array([Object(P.a)({accounts:P.a.array(["number"]),data:"string",programIdIndex:"number"})]),recentBlockhash:"string"})}),vt=Object(P.a)({signatures:P.a.array(["string"]),message:Object(P.a)({accountKeys:P.a.array([Object(P.a)({pubkey:"string",signer:"boolean",writable:"boolean"})]),instructions:P.a.array([P.a.union([Object(P.a)({accounts:P.a.array(["string"]),data:"string",programId:"string"}),Object(P.a)({parsed:"any",program:"string",programId:"string"})])]),recentBlockhash:"string"})}),kt=P.a.union(["null",P.a.pick({err:je,fee:"number",innerInstructions:P.a.union([P.a.array([Object(P.a)({index:"number",instructions:P.a.array([Object(P.a)({accounts:P.a.array(["number"]),data:"string",programIdIndex:"number"})])})]),"null","undefined"]),preBalances:P.a.array(["number"]),postBalances:P.a.array(["number"]),logMessages:P.a.union([P.a.array(["string"]),"null","undefined"])})]),wt=P.a.union(["null",P.a.pick({err:je,fee:"number",innerInstructions:P.a.union([P.a.array([Object(P.a)({index:"number",instructions:P.a.array([P.a.union([Object(P.a)({accounts:P.a.array(["string"]),data:"string",programId:"string"}),Object(P.a)({parsed:"any",program:"string",programId:"string"})])])})]),"null","undefined"]),preBalances:P.a.array(["number"]),postBalances:P.a.array(["number"]),logMessages:P.a.union([P.a.array(["string"]),"null","undefined"])})]),xt=ke(P.a.union(["null",P.a.pick({blockhash:"string",previousBlockhash:"string",parentSlot:"number",transactions:P.a.array([Object(P.a)({transaction:yt,meta:kt})]),rewards:P.a.union(["undefined",P.a.array([Object(P.a)({pubkey:"string",lamports:"number",postBalance:P.a.union(["number","undefined"]),rewardType:P.a.union(["string","undefined"])})])])})])),St=ke(P.a.union(["null",P.a.pick({slot:"number",transaction:yt,meta:kt})])),_t=ke(P.a.union(["null",P.a.pick({slot:"number",transaction:vt,meta:wt})])),Ot=ve(Object(P.a)({blockhash:"string",feeCalculator:Object(P.a)({lamportsPerSignature:"number"})})),jt=ke(P.a.array([P.a.pick({slot:"number",numTransactions:"number",numSlots:"number",samplePeriodSecs:"number"})])),At=ve(P.a.union(["null",Object(P.a)({feeCalculator:Object(P.a)({lamportsPerSignature:"number"})})])),It=ke("string"),Et=ke("string"),Bt=function(){function t(e,r){a()(this,t),u()(this,"_rpcEndpoint",void 0),u()(this,"_rpcRequest",void 0),u()(this,"_rpcWebSocket",void 0),u()(this,"_rpcWebSocketConnected",!1),u()(this,"_rpcWebSocketHeartbeat",null),u()(this,"_rpcWebSocketIdleTimeout",null),u()(this,"_commitment",void 0),u()(this,"_blockhashInfo",void 0),u()(this,"_disableBlockhashCaching",!1),u()(this,"_pollingBlockhash",!1),u()(this,"_accountChangeSubscriptions",{}),u()(this,"_accountChangeSubscriptionCounter",0),u()(this,"_programAccountChangeSubscriptions",{}),u()(this,"_programAccountChangeSubscriptionCounter",0),u()(this,"_slotSubscriptions",{}),u()(this,"_slotSubscriptionCounter",0),u()(this,"_signatureSubscriptions",{}),u()(this,"_signatureSubscriptionCounter",0),u()(this,"_rootSubscriptions",{}),u()(this,"_rootSubscriptionCounter",0),this._rpcEndpoint=e;var n=Object(A.parse)(e),s="https:"===n.protocol;this._rpcRequest=function(e,t){var r=new be(t),n=C()(function(){var t=b()(f.a.mark((function t(n,a){var s,i,o,u,c,l;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=r.requestStart(),i={method:"POST",body:n,agent:s,headers:{"Content-Type":"application/json"}},t.prev=2,o=5,u={},c=500;case 6:return t.next=8,E()(e,i);case 8:if(429===(u=t.sent).status){t.next=11;break}return t.abrupt("break",20);case 11:if(0!==(o-=1)){t.next=14;break}return t.abrupt("break",20);case 14:return console.log("Server responded with ".concat(u.status," ").concat(u.statusText,".  Retrying after ").concat(c,"ms delay...")),t.next=17,fe(c);case 17:c*=2;case 18:t.next=6;break;case 20:return t.next=22,u.text();case 22:l=t.sent,u.ok?a(null,l):a(new Error("".concat(u.status," ").concat(u.statusText,": ").concat(l))),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(2),a(t.t0);case 29:return t.prev=29,r.requestEnd(),t.finish(29);case 32:case"end":return t.stop()}}),t,null,[[2,26,29,32]])})));return function(e,r){return t.apply(this,arguments)}}());return function(e,t){return new Promise((function(r,a){n.request(e,t,(function(e,t){e?a(e):r(t)}))}))}}(n.href,s),this._commitment=r,this._blockhashInfo={recentBlockhash:null,lastFetch:new Date(0),transactionSignatures:[],simulatedSignatures:[]},n.protocol=s?"wss:":"ws:",n.host="",null!==n.port&&(n.port=String(Number(n.port)+1)),this._rpcWebSocket=new R.Client(Object(A.format)(n),{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this))}return i()(t,[{key:"getBalanceAndContext",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getBalance",n);case 3:if(a=e.sent,!(s=We(a)).error){e.next=7;break}throw new Error("failed to get balance for "+t.toBase58()+": "+s.error.message);case 7:return j()("undefined"!==typeof s.result),e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=b()(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBalanceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBlockTime",value:function(){var e=b()(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getBlockTime",[t]);case 2:if(r=e.sent,!(n=qe(r)).error){e.next=6;break}throw new Error("failed to get block time for slot "+t+": "+n.error.message);case 6:return j()("undefined"!==typeof n.result),e.abrupt("return",n.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinimumLedgerSlot",value:function(){var e=b()(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("minimumLedgerSlot",[]);case 2:if(t=e.sent,!(r=Te(t)).error){e.next=6;break}throw new Error("failed to get minimum ledger slot: "+r.error.message);case 6:return j()("undefined"!==typeof r.result),e.abrupt("return",r.result);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFirstAvailableBlock",value:function(){var e=b()(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getFirstAvailableBlock",[]);case 2:if(t=e.sent,!(r=Te(t)).error){e.next=6;break}throw new Error("failed to get first available block: "+r.error.message);case 6:return j()("undefined"!==typeof r.result),e.abrupt("return",r.result);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSupply",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getSupply",r);case 3:if(n=e.sent,!(a=Ne(n)).error){e.next=7;break}throw new Error("failed to get supply: "+a.error.message);case 7:return j()("undefined"!==typeof a.result),a.result.value.nonCirculatingAccounts=a.result.value.nonCirculatingAccounts.map((function(e){return new D(e)})),e.abrupt("return",a.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenSupply",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenSupply",n);case 3:if(a=e.sent,!(s=Me(a)).error){e.next=7;break}throw new Error("failed to get token supply: "+s.error.message);case 7:return j()("undefined"!==typeof s.result),e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTokenAccountBalance",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenAccountBalance",n);case 3:if(a=e.sent,!(s=Ue(a)).error){e.next=7;break}throw new Error("failed to get token account balance: "+s.error.message);case 7:return j()("undefined"!==typeof s.result),e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTokenAccountsByOwner",value:function(){var t=b()(f.a.mark((function t(r,n,a){var s,i,o,u,c,l,p;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=[r.toBase58()],n.mint?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()}),i=this._buildArgs(s,a,"base64"),t.next=5,this._rpcRequest("getTokenAccountsByOwner",i);case 5:if(o=t.sent,!(u=De(o)).error){t.next=9;break}throw new Error("failed to get token accounts owned by account "+r.toBase58()+": "+u.error.message);case 9:return c=u.result,l=c.context,p=c.value,j()("undefined"!==typeof c),t.abrupt("return",{context:l,value:p.map((function(t){return j()("base64"===t.account.data[1]),{pubkey:new D(t.pubkey),account:{executable:t.account.executable,owner:new D(t.account.owner),lamports:t.account.lamports,data:e.from(t.account.data[0],"base64")}}}))});case 13:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}()},{key:"getParsedTokenAccountsByOwner",value:function(){var e=b()(f.a.mark((function e(t,r,n){var a,s,i,o,u,c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[t.toBase58()],r.mint?a.push({mint:r.mint.toBase58()}):a.push({programId:r.programId.toBase58()}),s=this._buildArgs(a,n,"jsonParsed"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",s);case 5:if(i=e.sent,!(o=Le(i)).error){e.next=9;break}throw new Error("failed to get token accounts owned by account "+t.toBase58()+": "+o.error.message);case 9:return u=o.result,c=u.context,l=u.value,j()("undefined"!==typeof u),e.abrupt("return",{context:c,value:l.map((function(e){return{pubkey:new D(e.pubkey),account:{executable:e.account.executable,owner:new D(e.account.owner),lamports:e.account.lamports,data:e.account.data}}}))});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getLargestAccounts",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ye(ye({},t),{},{commitment:t&&t.commitment||this.commitment}),n=r.filter||r.commitment?[r]:[],e.next=4,this._rpcRequest("getLargestAccounts",n);case 4:if(a=e.sent,!(s=Fe(a)).error){e.next=8;break}throw new Error("failed to get largest accounts: "+s.error.message);case 8:return j()("undefined"!==typeof s.result),s.result.value=s.result.value.map((function(e){var t=e.address,r=e.lamports;return{address:new D(t),lamports:r}})),e.abrupt("return",s.result);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenLargestAccounts",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenLargestAccounts",n);case 3:if(a=e.sent,!(s=Ke(a)).error){e.next=7;break}throw new Error("failed to get token largest accounts: "+s.error.message);case 7:return j()("undefined"!==typeof s.result),s.result.value=s.result.value.map((function(e){return ye(ye({},e),{},{address:new D(e.address)})})),e.abrupt("return",s.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAccountInfoAndContext",value:function(){var t=b()(f.a.mark((function t(r,n){var a,s,i,o,u,c,l,p,h;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this._buildArgs([r.toBase58()],n,"base64"),t.next=3,this._rpcRequest("getAccountInfo",a);case 3:if(s=t.sent,!(i=Xe(s)).error){t.next=7;break}throw new Error("failed to get info about account "+r.toBase58()+": "+i.error.message);case 7:return j()("undefined"!==typeof i.result),o=null,i.result.value&&(u=i.result.value,c=u.executable,l=u.owner,p=u.lamports,h=u.data,j()("base64"===h[1]),o={executable:c,owner:new D(l),lamports:p,data:e.from(h[0],"base64")}),t.abrupt("return",{context:{slot:i.result.context.slot},value:o});case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getParsedAccountInfo",value:function(){var t=b()(f.a.mark((function t(r,n){var a,s,i,o,u,c,l,p,h,b;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this._buildArgs([r.toBase58()],n,"jsonParsed"),t.next=3,this._rpcRequest("getAccountInfo",a);case 3:if(s=t.sent,!(i=Ye(s)).error){t.next=7;break}throw new Error("failed to get info about account "+r.toBase58()+": "+i.error.message);case 7:return j()("undefined"!==typeof i.result),o=null,i.result.value&&(u=i.result.value,c=u.executable,l=u.owner,p=u.lamports,h=u.data,(b=h).program||(j()("base64"===b[1]),b=e.from(b[0],"base64")),o={executable:c,owner:new D(l),lamports:p,data:b}),t.abrupt("return",{context:{slot:i.result.context.slot},value:o});case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var e=b()(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get info about account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getStakeActivation",value:function(){var e=b()(f.a.mark((function e(t,r,n){var a,s,i,o,u,c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._buildArgs([t.toBase58()],r,void 0,void 0!==n?{epoch:n}:void 0),e.next=3,this._rpcRequest("getStakeActivation",a);case 3:if(s=e.sent,!(i=Ze(s)).error){e.next=7;break}throw new Error("failed to get Stake Activation ".concat(t.toBase58(),": ").concat(i.error.message));case 7:return j()("undefined"!==typeof i.result),o=i.result,u=o.state,c=o.active,l=o.inactive,e.abrupt("return",{state:u,active:c,inactive:l});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getProgramAccounts",value:function(){var t=b()(f.a.mark((function t(r,n){var a,s,i,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this._buildArgs([r.toBase58()],n,"base64"),t.next=3,this._rpcRequest("getProgramAccounts",a);case 3:if(s=t.sent,!(i=ut(s)).error){t.next=7;break}throw new Error("failed to get accounts owned by program "+r.toBase58()+": "+i.error.message);case 7:return o=i.result,j()("undefined"!==typeof o),t.abrupt("return",o.map((function(t){return j()("base64"===t.account.data[1]),{pubkey:new D(t.pubkey),account:{executable:t.account.executable,owner:new D(t.account.owner),lamports:t.account.lamports,data:e.from(t.account.data[0],"base64")}}})));case 10:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getParsedProgramAccounts",value:function(){var t=b()(f.a.mark((function t(r,n){var a,s,i,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this._buildArgs([r.toBase58()],n,"jsonParsed"),t.next=3,this._rpcRequest("getProgramAccounts",a);case 3:if(s=t.sent,!(i=ct(s)).error){t.next=7;break}throw new Error("failed to get accounts owned by program "+r.toBase58()+": "+i.error.message);case 7:return o=i.result,j()("undefined"!==typeof o),t.abrupt("return",o.map((function(t){var r=t.account.data;return r.program||(j()("base64"===r[1]),r=e.from(r[0],"base64")),{pubkey:new D(t.pubkey),account:{executable:t.account.executable,owner:new D(t.account.owner),lamports:t.account.lamports,data:r}}})));case 10:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"confirmTransaction",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s,i,o,u,c,l,p=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=y.a.decode(t),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("signature must be base58 encoded: "+t);case 7:j()(64===n.length,"signature has invalid length"),a=Date.now(),s=r||this.commitment,o=null,u=new Promise((function(e,r){try{i=p.onSignature(t,(function(t,r){i=void 0,o={context:r,value:t},e()}),s)}catch(n){r(n)}})),c=6e4,e.t1=s,e.next="recent"===e.t1||"single"===e.t1||"singleGossip"===e.t1?16:("max"===e.t1||e.t1,18);break;case 16:return c=1e4,e.abrupt("break",18);case 18:return e.prev=18,e.next=21,he(u,c);case 21:return e.prev=21,i&&this.removeSignatureListener(i),e.finish(21);case 24:if(null!==o){e.next=27;break}throw l=(Date.now()-a)/1e3,new Error("Transaction was not confirmed in ".concat(l.toFixed(2)," seconds"));case 27:return e.abrupt("return",o);case 28:case"end":return e.stop()}}),e,this,[[0,4],[18,,21,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getClusterNodes",value:function(){var e=b()(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getClusterNodes",[]);case 2:if(t=e.sent,!(r=ft(t)).error){e.next=6;break}throw new Error("failed to get cluster nodes: "+r.error.message);case 6:return j()("undefined"!==typeof r.result),e.abrupt("return",r.result);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVoteAccounts",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getVoteAccounts",r);case 3:if(n=e.sent,!(a=ht(n)).error){e.next=7;break}throw new Error("failed to get vote accounts: "+a.error.message);case 7:return j()("undefined"!==typeof a.result),e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlot",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getSlot",r);case 3:if(n=e.sent,!(a=lt(n)).error){e.next=7;break}throw new Error("failed to get slot: "+a.error.message);case 7:return j()("undefined"!==typeof a.result),e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlotLeader",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getSlotLeader",r);case 3:if(n=e.sent,!(a=pt(n)).error){e.next=7;break}throw new Error("failed to get slot leader: "+a.error.message);case 7:return j()("undefined"!==typeof a.result),e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSignatureStatus",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSignatureStatuses([t],r);case 2:return n=e.sent,a=n.context,s=n.value,j()(1===s.length),e.abrupt("return",{context:a,value:s[0]});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSignatureStatuses",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t],r&&n.push(r),e.next=4,this._rpcRequest("getSignatureStatuses",n);case 4:if(a=e.sent,!(s=bt(a)).error){e.next=8;break}throw new Error("failed to get signature status: "+s.error.message);case 8:return j()("undefined"!==typeof s.result),e.abrupt("return",s.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTransactionCount",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getTransactionCount",r);case 3:if(n=e.sent,!(a=dt(n)).error){e.next=7;break}throw new Error("failed to get transaction count: "+a.error.message);case 7:return j()("undefined"!==typeof a.result),e.abrupt("return",Number(a.result));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalSupply",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getTotalSupply",r);case 3:if(n=e.sent,!(a=gt(n)).error){e.next=7;break}throw new Error("faied to get total supply: "+a.error.message);case 7:return j()("undefined"!==typeof a.result),e.abrupt("return",Number(a.result));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInflationGovernor",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getInflationGovernor",r);case 3:if(n=e.sent,!(a=Be(n)).error){e.next=7;break}throw new Error("failed to get inflation: "+a.error.message);case 7:return j()("undefined"!==typeof a.result),e.abrupt("return",xe(a.result));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEpochInfo",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getEpochInfo",r);case 3:if(n=e.sent,!(a=Ce(n)).error){e.next=7;break}throw new Error("failed to get epoch info: "+a.error.message);case 7:return j()("undefined"!==typeof a.result),e.abrupt("return",Se(a.result));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEpochSchedule",value:function(){var e=b()(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getEpochSchedule",[]);case 2:if(t=e.sent,!(r=Pe(t)).error){e.next=6;break}throw new Error("failed to get epoch schedule: "+r.error.message);case 6:return j()("undefined"!==typeof r.result),e.abrupt("return",_e(r.result));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLeaderSchedule",value:function(){var e=b()(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getLeaderSchedule",[]);case 2:if(t=e.sent,!(r=Re(t)).error){e.next=6;break}throw new Error("failed to get leader schedule: "+r.error.message);case 6:return j()("undefined"!==typeof r.result),e.abrupt("return",r.result);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMinimumBalanceForRentExemption",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getMinimumBalanceForRentExemption",n);case 3:if(a=e.sent,!(s=mt(a)).error){e.next=8;break}return console.warn("Unable to fetch minimum balance for rent exemption"),e.abrupt("return",0);case 8:return j()("undefined"!==typeof s.result),e.abrupt("return",Number(s.result));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRecentBlockhashAndContext",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getRecentBlockhash",r);case 3:if(n=e.sent,!(a=Ot(n)).error){e.next=7;break}throw new Error("failed to get recent blockhash: "+a.error.message);case 7:return j()("undefined"!==typeof a.result),e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentPerformanceSamples",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs(t?[t]:[]),e.next=3,this._rpcRequest("getRecentPerformanceSamples",r);case 3:if(n=e.sent,!(a=jt(n)).error){e.next=7;break}throw new Error("failed to get recent performance samples: "+a.error.message);case 7:return j()("undefined"!==typeof a.result),e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFeeCalculatorForBlockhash",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s,i,o,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getFeeCalculatorForBlockhash",n);case 3:if(a=e.sent,!(s=At(a)).error){e.next=7;break}throw new Error("failed to get fee calculator: "+s.error.message);case 7:return j()("undefined"!==typeof s.result),i=s.result,o=i.context,u=i.value,e.abrupt("return",{context:o,value:u&&u.feeCalculator});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRecentBlockhash",value:function(){var e=b()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRecentBlockhashAndContext(t).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get recent blockhash: "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getVersion",value:function(){var e=b()(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getVersion",[]);case 2:if(t=e.sent,!(r=Ve(t)).error){e.next=6;break}throw new Error("failed to get version: "+r.error.message);case 6:return j()("undefined"!==typeof r.result),e.abrupt("return",r.result);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getConfirmedBlock",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getConfirmedBlock",[t]);case 2:if(r=e.sent,!(n=xt(r)).error){e.next=6;break}throw new Error("failed to get confirmed block: "+n.error.message);case 6:if(a=n.result,j()("undefined"!==typeof a),a){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return e.abrupt("return",{blockhash:new D(a.blockhash).toString(),previousBlockhash:new D(a.previousBlockhash).toString(),parentSlot:a.parentSlot,transactions:a.transactions.map((function(e){var t=e.transaction,r=t.message,n=t.signatures;return{transaction:se.populate(new $(r),n),meta:e.meta}})),rewards:a.rewards||[]});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfirmedTransaction",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a,s,i,o,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getConfirmedTransaction",[t]);case 2:if(r=e.sent,n=St(r),a=n.result,!(s=n.error)){e.next=6;break}throw new Error("failed to get confirmed transaction: "+s.message);case 6:if(j()("undefined"!==typeof a),null!==a){e.next=9;break}return e.abrupt("return",a);case 9:return i=a.transaction,o=i.message,u=i.signatures,e.abrupt("return",{slot:a.slot,transaction:se.populate(new $(o),u),meta:a.meta});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getParsedConfirmedTransaction",value:function(){var e=b()(f.a.mark((function e(t){var r,n,a,s,i,o,u,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getConfirmedTransaction",[t,"jsonParsed"]);case 2:if(r=e.sent,n=_t(r),a=n.result,!(s=n.error)){e.next=6;break}throw new Error("failed to get confirmed transaction: "+s.message);case 6:if(j()("undefined"!==typeof a),null!==a){e.next=9;break}return e.abrupt("return",a);case 9:return i=a.transaction.message,o=i.accountKeys,u=i.instructions,c=i.recentBlockhash,e.abrupt("return",{slot:a.slot,meta:a.meta,transaction:{signatures:a.transaction.signatures,message:{accountKeys:o.map((function(e){return{pubkey:new D(e.pubkey),signer:e.signer,writable:e.writable}})),instructions:u.map((function(e){var t={programId:new D(e.programId)};return"accounts"in e&&(t.accounts=e.accounts.map((function(e){return new D(e)}))),ye(ye({},e),t)})),recentBlockhash:c}}});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfirmedSignaturesForAddress",value:function(){var e=b()(f.a.mark((function e(t,r,n){var a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getConfirmedSignaturesForAddress",[t.toBase58(),r,n]);case 2:if(a=e.sent,!(s=$e(a)).error){e.next=6;break}throw new Error("failed to get confirmed signatures for address: "+s.error.message);case 6:return j()("undefined"!==typeof s.result),e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getConfirmedSignaturesForAddress2",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getConfirmedSignaturesForAddress2",[t.toBase58(),r]);case 2:if(n=e.sent,!(a=Qe(n)).error){e.next=6;break}throw new Error("failed to get confirmed signatures for address: "+a.error.message);case 6:return j()("undefined"!==typeof a.result),e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNonceAndContext",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,a=n.context,s=n.value,i=null,null!==s&&(i=pe.fromAccountData(s.data)),e.abrupt("return",{context:a,value:i});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=b()(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNonceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"requestAirdrop",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("requestAirdrop",[t.toBase58(),r]);case 2:if(n=e.sent,!(a=It(n)).error){e.next=6;break}throw new Error("airdrop to "+t.toBase58()+" failed: "+a.error.message);case 6:return j()("undefined"!==typeof a.result),e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_recentBlockhash",value:function(){var e=b()(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}case 1:if(!this._pollingBlockhash){e.next=6;break}return e.next=4,fe(100);case 4:e.next=1;break;case 6:if(r=Date.now()-this._blockhashInfo.lastFetch>=3e4,null===this._blockhashInfo.recentBlockhash||r){e.next=9;break}return e.abrupt("return",this._blockhashInfo.recentBlockhash);case 9:return e.next=11,this._pollNewBlockhash();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_pollNewBlockhash",value:function(){var e=b()(f.a.mark((function e(){var t,r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._pollingBlockhash=!0,e.prev=1,t=Date.now(),r=0;case 4:if(!(r<50)){e.next=17;break}return e.next=7,this.getRecentBlockhash("max");case 7:if(n=e.sent,a=n.blockhash,this._blockhashInfo.recentBlockhash==a){e.next=12;break}return this._blockhashInfo={recentBlockhash:a,lastFetch:new Date,transactionSignatures:[],simulatedSignatures:[]},e.abrupt("return",a);case 12:return e.next=14,fe(200);case 14:r++,e.next=4;break;case 17:throw new Error("Unable to obtain a new blockhash after ".concat(Date.now()-t,"ms"));case 18:return e.prev=18,this._pollingBlockhash=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[1,,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"simulateTransaction",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s,i,o,u,c,l,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.nonceInfo||!r){e.next=4;break}t.sign.apply(t,x()(r)),e.next=22;break;case 4:n=this._disableBlockhashCaching;case 5:return e.next=7,this._recentBlockhash(n);case 7:if(t.recentBlockhash=e.sent,r){e.next=10;break}return e.abrupt("break",22);case 10:if(t.sign.apply(t,x()(r)),t.signature){e.next=13;break}throw new Error("!signature");case 13:if(a=t.signature.toString("base64"),this._blockhashInfo.simulatedSignatures.includes(a)||this._blockhashInfo.transactionSignatures.includes(a)){e.next=19;break}return this._blockhashInfo.simulatedSignatures.push(a),e.abrupt("break",22);case 19:n=!0;case 20:e.next=5;break;case 22:return s=t.serializeMessage(),i=t._serialize(s),o=i.toString("base64"),c=[o,u={encoding:"base64"}],r&&(u.sigVerify=!0),e.next=30,this._rpcRequest("simulateTransaction",c);case 30:if(l=e.sent,!(p=Ee(l)).error){e.next=34;break}throw new Error("failed to simulate transaction: "+p.error.message);case 34:return j()("undefined"!==typeof p.result),j()(p.result),e.abrupt("return",p.result);case 37:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=b()(f.a.mark((function e(t,r,n){var a,s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.nonceInfo){e.next=4;break}t.sign.apply(t,x()(r)),e.next=20;break;case 4:a=this._disableBlockhashCaching;case 5:return e.next=7,this._recentBlockhash(a);case 7:if(t.recentBlockhash=e.sent,t.sign.apply(t,x()(r)),t.signature){e.next=11;break}throw new Error("!signature");case 11:if(s=t.signature.toString("base64"),this._blockhashInfo.transactionSignatures.includes(s)){e.next=17;break}return this._blockhashInfo.transactionSignatures.push(s),e.abrupt("break",20);case 17:a=!0;case 18:e.next=5;break;case 20:return i=t.serialize(),e.next=23,this.sendRawTransaction(i,n);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"validatorExit",value:function(){var e=b()(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("validatorExit",[]);case 2:if(t=e.sent,!(r=ke("boolean")(t)).error){e.next=6;break}throw new Error("validator exit failed: "+r.error.message);case 6:return j()("undefined"!==typeof r.result),e.abrupt("return",r.result);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendRawTransaction",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=U(t).toString("base64"),e.next=3,this.sendEncodedTransaction(n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendEncodedTransaction",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a,s,i,o,u,c,l,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[t,n={encoding:"base64"}],s=r&&r.skipPreflight,i=r&&r.preflightCommitment,!s||!i){e.next=6;break}throw new Error("cannot set preflightCommitment when skipPreflight is enabled");case 6:return s?n.skipPreflight=s:i&&(n.preflightCommitment=i),e.next=9,this._rpcRequest("sendTransaction",a);case 9:if(o=e.sent,!(u=Et(o)).error){e.next=14;break}throw u.error.data&&(c=u.error.data.logs)&&Array.isArray(c)&&(p=(l="\n    ")+c.join(l),console.error(u.error.message,p)),new Error("failed to send transaction: "+u.error.message);case 14:return j()("undefined"!==typeof u.result),j()(u.result),e.abrupt("return",u.result);case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_wsOnOpen",value:function(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((function(){e._rpcWebSocket.notify("ping").catch((function(){}))}),5e3),this._updateSubscriptions()}},{key:"_wsOnError",value:function(e){console.error("ws error:",e.message)}},{key:"_wsOnClose",value:function(e){clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null,1e3!==e?this._resetSubscriptions():this._updateSubscriptions()}},{key:"_subscribe",value:function(){var e=b()(f.a.mark((function e(t,r,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.subscriptionId){e.next=13;break}return t.subscriptionId="subscribing",e.prev=2,e.next=5,this._rpcWebSocket.call(r,n);case 5:a=e.sent,"subscribing"===t.subscriptionId&&(t.subscriptionId=a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),"subscribing"===t.subscriptionId&&(t.subscriptionId=null),console.error("".concat(r," error for argument"),n,e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_unsubscribe",value:function(){var e=b()(f.a.mark((function e(t,r){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=t.subscriptionId)||"string"==typeof n){e.next=11;break}return a=n,e.prev=3,e.next=6,this._rpcWebSocket.call(r,[a]);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("".concat(r," error:"),e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_resetSubscriptions",value:function(){Object.values(this._accountChangeSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._programAccountChangeSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._signatureSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._slotSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._rootSubscriptions).forEach((function(e){return e.subscriptionId=null}))}},{key:"_updateSubscriptions",value:function(){var e=this,t=Object.keys(this._accountChangeSubscriptions).map(Number),r=Object.keys(this._programAccountChangeSubscriptions).map(Number),n=Object.keys(this._slotSubscriptions).map(Number),a=Object.keys(this._signatureSubscriptions).map(Number),s=Object.keys(this._rootSubscriptions).map(Number);if(0!==t.length||0!==r.length||0!==n.length||0!==a.length||0!==s.length)if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){var i,o=de(t);try{for(o.s();!(i=o.n()).done;){var u=i.value,c=this._accountChangeSubscriptions[u];this._subscribe(c,"accountSubscribe",this._buildArgs([c.publicKey],c.commitment,"base64"))}}catch(j){o.e(j)}finally{o.f()}var l,p=de(r);try{for(p.s();!(l=p.n()).done;){var f=l.value,h=this._programAccountChangeSubscriptions[f];this._subscribe(h,"programSubscribe",this._buildArgs([h.programId],h.commitment,"base64"))}}catch(j){p.e(j)}finally{p.f()}var b,d=de(n);try{for(d.s();!(b=d.n()).done;){var g=b.value,m=this._slotSubscriptions[g];this._subscribe(m,"slotSubscribe",[])}}catch(j){d.e(j)}finally{d.f()}var y,v=de(a);try{for(v.s();!(y=v.n()).done;){var k=y.value,w=this._signatureSubscriptions[k];this._subscribe(w,"signatureSubscribe",this._buildArgs([w.signature],w.commitment))}}catch(j){v.e(j)}finally{v.f()}var x,S=de(s);try{for(S.s();!(x=S.n()).done;){var _=x.value,O=this._rootSubscriptions[_];this._subscribe(O,"rootSubscribe",[])}}catch(j){S.e(j)}finally{S.f()}}else this._rpcWebSocket.connect();else this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((function(){e._rpcWebSocketIdleTimeout=null,e._rpcWebSocket.close()}),500))}},{key:"_wsOnAccountNotification",value:function(t){var r=et(t);if(r.error)throw new Error("account notification failed: "+r.error.message);j()("undefined"!==typeof r.result);var n,a=de(Object.keys(this._accountChangeSubscriptions).map(Number));try{for(a.s();!(n=a.n()).done;){var s=n.value,i=this._accountChangeSubscriptions[s];if(i.subscriptionId===r.subscription){var o=r.result,u=o.value,c=o.context;return j()("base64"===u.data[1]),i.callback({executable:u.executable,owner:new D(u.owner),lamports:u.lamports,data:e.from(u.data[0],"base64")},c),!0}}}catch(l){a.e(l)}finally{a.f()}}},{key:"onAccountChange",value:function(e,t,r){var n=++this._accountChangeSubscriptionCounter;return this._accountChangeSubscriptions[n]={publicKey:e.toBase58(),callback:t,commitment:r,subscriptionId:null},this._updateSubscriptions(),n}},{key:"removeAccountChangeListener",value:function(){var e=b()(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._accountChangeSubscriptions[t]){e.next=8;break}return r=this._accountChangeSubscriptions[t],delete this._accountChangeSubscriptions[t],e.next=5,this._unsubscribe(r,"accountUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown account change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnProgramAccountNotification",value:function(t){var r=nt(t);if(r.error)throw new Error("program account notification failed: "+r.error.message);j()("undefined"!==typeof r.result);var n,a=de(Object.keys(this._programAccountChangeSubscriptions).map(Number));try{for(a.s();!(n=a.n()).done;){var s=n.value,i=this._programAccountChangeSubscriptions[s];if(i.subscriptionId===r.subscription){var o=r.result,u=o.value,c=o.context;return j()("base64"===u.account.data[1]),i.callback({accountId:u.pubkey,accountInfo:{executable:u.account.executable,owner:new D(u.account.owner),lamports:u.account.lamports,data:e.from(u.account.data[0],"base64")}},c),!0}}}catch(l){a.e(l)}finally{a.f()}}},{key:"onProgramAccountChange",value:function(e,t,r){var n=++this._programAccountChangeSubscriptionCounter;return this._programAccountChangeSubscriptions[n]={programId:e.toBase58(),callback:t,commitment:r,subscriptionId:null},this._updateSubscriptions(),n}},{key:"removeProgramAccountChangeListener",value:function(){var e=b()(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._programAccountChangeSubscriptions[t]){e.next=8;break}return r=this._programAccountChangeSubscriptions[t],delete this._programAccountChangeSubscriptions[t],e.next=5,this._unsubscribe(r,"programUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown program account change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnSlotNotification",value:function(e){var t=st(e);if(t.error)throw new Error("slot notification failed: "+t.error.message);j()("undefined"!==typeof t.result);var r,n=t.result,a=n.parent,s=n.slot,i=n.root,o=de(Object.keys(this._slotSubscriptions).map(Number));try{for(o.s();!(r=o.n()).done;){var u=r.value,c=this._slotSubscriptions[u];if(c.subscriptionId===t.subscription)return c.callback({parent:a,slot:s,root:i}),!0}}catch(l){o.e(l)}finally{o.f()}}},{key:"onSlotChange",value:function(e){var t=++this._slotSubscriptionCounter;return this._slotSubscriptions[t]={callback:e,subscriptionId:null},this._updateSubscriptions(),t}},{key:"removeSlotChangeListener",value:function(){var e=b()(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._slotSubscriptions[t]){e.next=8;break}return r=this._slotSubscriptions[t],delete this._slotSubscriptions[t],e.next=5,this._unsubscribe(r,"slotUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown slot change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_buildArgs",value:function(e,t,r,n){var a=t||this._commitment;if(a||r||n){var s={};r&&(s.encoding=r),a&&(s.commitment=a),n&&(s=Object.assign(s,n)),e.push(s)}return e}},{key:"_wsOnSignatureNotification",value:function(e){var t=it(e);if(t.error)throw new Error("signature notification failed: "+t.error.message);j()("undefined"!==typeof t.result);var r,n=de(Object.keys(this._signatureSubscriptions).map(Number));try{for(n.s();!(r=n.n()).done;){var a=r.value,s=this._signatureSubscriptions[a];if(s.subscriptionId===t.subscription)return delete this._signatureSubscriptions[a],this._updateSubscriptions(),void s.callback(t.result.value,t.result.context)}}catch(i){n.e(i)}finally{n.f()}}},{key:"onSignature",value:function(e,t,r){var n=++this._signatureSubscriptionCounter;return this._signatureSubscriptions[n]={signature:e,callback:t,commitment:r,subscriptionId:null},this._updateSubscriptions(),n}},{key:"removeSignatureListener",value:function(){var e=b()(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._signatureSubscriptions[t]){e.next=8;break}return r=this._signatureSubscriptions[t],delete this._signatureSubscriptions[t],e.next=5,this._unsubscribe(r,"signatureUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown signature result id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnRootNotification",value:function(e){var t=ot(e);if(t.error)throw new Error("root notification failed: "+t.error.message);j()("undefined"!==typeof t.result);var r,n=t.result,a=de(Object.keys(this._rootSubscriptions).map(Number));try{for(a.s();!(r=a.n()).done;){var s=r.value,i=this._rootSubscriptions[s];if(i.subscriptionId===t.subscription)return i.callback(n),!0}}catch(o){a.e(o)}finally{a.f()}}},{key:"onRootChange",value:function(e){var t=++this._rootSubscriptionCounter;return this._rootSubscriptions[t]={callback:e,subscriptionId:null},this._updateSubscriptions(),t}},{key:"removeRootChangeListener",value:function(){var e=b()(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._rootSubscriptions[t]){e.next=8;break}return r=this._rootSubscriptions[t],delete this._rootSubscriptions[t],e.next=5,this._unsubscribe(r,"rootUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown root change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"commitment",get:function(){return this._commitment}}]),t}();function Ct(t,r){var n=t.layout.span>=0?t.layout.span:function(e,t){var r=0;return e.layout.fields.forEach((function(e){e.span>=0?r+=e.span:"function"===typeof e.alloc&&(r+=e.alloc(t[e.property]))})),r}(t,r),a=e.alloc(n),s=Object.assign({instruction:t.index},r);return t.layout.encode(s,a),a}var Pt=Object.freeze({Create:{index:0,layout:Object(k.struct)([Object(k.u32)("instruction"),Object(k.ns64)("lamports"),Object(k.ns64)("space"),G("programId")])},Assign:{index:1,layout:Object(k.struct)([Object(k.u32)("instruction"),G("programId")])},Transfer:{index:2,layout:Object(k.struct)([Object(k.u32)("instruction"),Object(k.ns64)("lamports")])},CreateWithSeed:{index:3,layout:Object(k.struct)([Object(k.u32)("instruction"),G("base"),X("seed"),Object(k.ns64)("lamports"),Object(k.ns64)("space"),G("programId")])},AdvanceNonceAccount:{index:4,layout:Object(k.struct)([Object(k.u32)("instruction")])},WithdrawNonceAccount:{index:5,layout:Object(k.struct)([Object(k.u32)("instruction"),Object(k.ns64)("lamports")])},InitializeNonceAccount:{index:6,layout:Object(k.struct)([Object(k.u32)("instruction"),G("authorized")])},AuthorizeNonceAccount:{index:7,layout:Object(k.struct)([Object(k.u32)("instruction"),G("authorized")])},Allocate:{index:8,layout:Object(k.struct)([Object(k.u32)("instruction"),Object(k.ns64)("space")])},AllocateWithSeed:{index:9,layout:Object(k.struct)([Object(k.u32)("instruction"),G("base"),X("seed"),Object(k.ns64)("space"),G("programId")])},AssignWithSeed:{index:10,layout:Object(k.struct)([Object(k.u32)("instruction"),G("base"),X("seed"),G("programId")])}}),Rt=function(){function e(){a()(this,e)}return i()(e,null,[{key:"createAccount",value:function(e){var t=Ct(Pt.Create,{lamports:e.lamports,space:e.space,programId:e.programId.toBuffer()});return new ae({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}},{key:"transfer",value:function(e){var t=Ct(Pt.Transfer,{lamports:e.lamports});return new ae({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}],programId:this.programId,data:t})}},{key:"assign",value:function(e){var t;e.basePubkey?t=Ct(Pt.AssignWithSeed,{base:e.basePubkey.toBuffer(),seed:e.seed,programId:e.programId.toBuffer()}):t=Ct(Pt.Assign,{programId:e.programId.toBuffer()});return new ae({keys:[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}},{key:"createAccountWithSeed",value:function(e){var t=Ct(Pt.CreateWithSeed,{base:e.basePubkey.toBuffer(),seed:e.seed,lamports:e.lamports,space:e.space,programId:e.programId.toBuffer()});return new ae({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}],programId:this.programId,data:t})}},{key:"createNonceAccount",value:function(t){var r=new se;t.basePubkey&&t.seed?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:le,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:le,programId:this.programId}));var n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}},{key:"nonceInitialize",value:function(e){var t=Ct(Pt.InitializeNonceAccount,{authorized:e.authorizedPubkey.toBuffer()}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ie,isSigner:!1,isWritable:!1},{pubkey:oe,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new ae(r)}},{key:"nonceAdvance",value:function(e){var t=Ct(Pt.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ie,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new ae(r)}},{key:"nonceWithdraw",value:function(e){var t=Ct(Pt.WithdrawNonceAccount,{lamports:e.lamports});return new ae({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:ie,isSigner:!1,isWritable:!1},{pubkey:oe,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"nonceAuthorize",value:function(e){var t=Ct(Pt.AuthorizeNonceAccount,{authorized:e.newAuthorizedPubkey.toBuffer()});return new ae({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"allocate",value:function(e){var t;e.basePubkey?t=Ct(Pt.AllocateWithSeed,{base:e.basePubkey.toBuffer(),seed:e.seed,space:e.space,programId:e.programId.toBuffer()}):t=Ct(Pt.Allocate,{space:e.space});return new ae({keys:[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}},{key:"programId",get:function(){return new D("11111111111111111111111111111111")}}]),e}();new D("BPFLoader2111111111111111111111111111111111"),new D("StakeConfig11111111111111111111111111111111"),Object.freeze({Initialize:{index:0,layout:Object(k.struct)([Object(k.u32)("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return Object(k.struct)([G("staker"),G("withdrawer")],e)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return Object(k.struct)([Object(k.ns64)("unixTimestamp"),Object(k.ns64)("epoch"),G("custodian")],e)}()])},Authorize:{index:1,layout:Object(k.struct)([Object(k.u32)("instruction"),G("newAuthorized"),Object(k.u32)("stakeAuthorizationType")])},Delegate:{index:2,layout:Object(k.struct)([Object(k.u32)("instruction")])},Split:{index:3,layout:Object(k.struct)([Object(k.u32)("instruction"),Object(k.ns64)("lamports")])},Withdraw:{index:4,layout:Object(k.struct)([Object(k.u32)("instruction"),Object(k.ns64)("lamports")])},Deactivate:{index:5,layout:Object(k.struct)([Object(k.u32)("instruction")])},AuthorizeWithSeed:{index:8,layout:Object(k.struct)([Object(k.u32)("instruction"),G("newAuthorized"),Object(k.u32)("stakeAuthorizationType"),X("authoritySeed"),G("authorityOwner")])}}),Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),K.a.publicKeyCreate,K.a.ecdsaSign,Object(k.struct)([Object(k.u8)("numSignatures"),Object(k.u16)("signatureOffset"),Object(k.u8)("signatureInstructionIndex"),Object(k.u16)("ethAddressOffset"),Object(k.u8)("ethAddressInstructionIndex"),Object(k.u16)("messageDataOffset"),Object(k.u16)("messageDataSize"),Object(k.u8)("messageInstructionIndex"),Object(k.blob)(20,"ethPublicKey"),Object(k.blob)(64,"signature"),Object(k.u8)("recoveryId")]);new D("Va1idator1nfo111111111111111111111111111111"),Object(P.a)({name:"string",website:"string?",details:"string?",keybaseUsername:"string?"}),new D("Vote111111111111111111111111111111111111111"),Object(k.struct)([G("nodePubkey"),G("authorizedVoterPubkey"),G("authorizedWithdrawerPubkey"),Object(k.u8)("commission"),Object(k.nu64)(),Object(k.seq)(Object(k.struct)([Object(k.nu64)("slot"),Object(k.u32)("confirmationCount")]),Object(k.offset)(Object(k.u32)(),-8),"votes"),Object(k.u8)("rootSlotValid"),Object(k.nu64)("rootSlot"),Object(k.nu64)("epoch"),Object(k.nu64)("credits"),Object(k.nu64)("lastEpochCredits"),Object(k.nu64)(),Object(k.seq)(Object(k.struct)([Object(k.nu64)("epoch"),Object(k.nu64)("credits"),Object(k.nu64)("prevCredits")]),Object(k.offset)(Object(k.u32)(),-8),"epochCredits")]);var Wt={http:{devnet:"http://devnet.solana.com",testnet:"http://testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com"},https:{devnet:"https://devnet.solana.com",testnet:"https://testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com"}};function qt(e,t){var r=!1===t?"http":"https";if(!e)return Wt[r].devnet;var n=Wt[r][e];if(!n)throw new Error("Unknown ".concat(r," cluster: ").concat(e));return n}}).call(this,r("HDXh").Buffer)}}]);